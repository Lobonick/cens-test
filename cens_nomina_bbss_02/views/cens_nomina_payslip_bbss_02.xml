<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_hr_payslip_form_inherit_bbss" model="ir.ui.view">
        <field name="name">hr.payslip.form.inherit.bbss</field>
        <field name="model">hr.payslip</field>
        <field name="inherit_id" ref="hr_payroll.view_hr_payslip_form"/>
        <field name="priority">40</field>
        <field name="arch" type="xml">
    
            <xpath expr="//form" position="inside">
                <field name="x_studio_cesado" invisible="1"/>
                <field name="x_cens_remu_base" invisible="1"/>
                <field name="x_cens_tipo_calc" invisible="1"/>
            </xpath>

            <xpath expr="//notebook/page[last()]" position="after">
                <page string="Liquidaci√≥n BB.SS." 
                      name="liquidacion_beneficios"
                      attrs="{'invisible': [('x_studio_cesado', '=', False)]}">
                    
                    <!-- Header informativo -->
                    <div class="alert alert-info" role="alert" style="margin-bottom: 20px;">
                        <h1><i class="fa fa-info-circle"/> Liquidaci√≥n de Beneficios Sociales</h1>
                        <p style="margin: 5px 0 0 0; font-size: 16px;">
                            Esta secci√≥n contiene los c√°lculos de liquidaci√≥n para empleados cesados.
                        </p>
                    </div>
                    
                    <!-- Contenido principal -->
                    <separator string="DETALLES GENERALES" style="color: #875A7B; font-weight: bold; font-size: 16px;"/>
                    <group>
                        <group string="üìÖ Informaci√≥n del Per√≠odo">
                            <field name="x_cens_periodo_ini" 
                                   string="Per√≠odo Inicio"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                            <field name="x_cens_periodo_fin" 
                                   string="Per√≠odo Fin"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                        </group>
                        <group string="üïí Detalle del Tiempo de Servicio">
                            <field name="x_cens_periodo_aa" 
                                   string="A√±os"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                            <field name="x_cens_periodo_mm" 
                                   string="Meses"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                            <field name="x_cens_periodo_dd" 
                                   string="D√≠as"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                        </group>
                        
                    </group>                 
                    <group>
                        <group string="‚è±Ô∏è Totales de Tiempo">
                            <field name="x_cens_ctotal_timeserv" string="Total Tiempo de Servicio"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                            <field name="x_cens_ctotal_tnocomp" string="Total Tiempo No Computable"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                            <field name="x_cens_ctotal_tliqui" string="Total Tiempo para Liquidaci√≥n"
                                   attrs="{'readonly': [('x_studio_cesado', '=', False)]}"/>
                        </group>
                        <group string="üí∞ Remuneraciones Base">
                            <field name="x_cens_remu_base" 
                                   string="Remuneraci√≥n Base"
                                   style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <field name="x_cens_asig_fami" 
                                   string="Asignaci√≥n Familiar"
                                   style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <field name="x_cens_grat_16to" 
                                   string="Gratificaci√≥n 1/6"
                                   style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <field name="x_cens_none_remu" 
                                   string="Conceptos No Remunerativos"
                                   style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <field name="x_cens_remu_comp" 
                                   string="Remuneraci√≥n Computable"
                                   style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                        </group>
                    </group>
                    <separator/>
                    <separator string="üßÆ LIQUIDACI√ìN CTS - TRUNCOS" style="color: #875A7B; font-weight: bold; font-size: 16px;"/>
                    <group>
                        <group> 
                            <separator string="‚è±Ô∏è Descripci√≥n"/>
                            <field name="x_cens_ccts_peri" string="Detalle del Periodo  " nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_ccts_dmes" string="Detalle c√°lculo x mes" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_ccts_ddia" string="Detalle c√°lculo x d√≠a" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                        </group>
                        <group>
                            <separator string="üí∞ Importes"/>
                            <!-- <label string=" " colspan="2" class="o_form_label"/>  -->
                            <field name="x_cens_moneda" 
                                   string="Moneda" 
                                   nolabel="1" 
                                   colspan="2" 
                                   readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px;"/>
                            <field name="x_cens_ccts_imes" 
                                   string="Importe c√°lculo x mes" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_ccts_idia" 
                                   string="Importe c√°lculo x d√≠a" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_ccts_itot" 
                                   string="Importe total CTS" 
                                   nolabel="1" 
                                   colspan="2"
                                   class="oe_subtotal_footer_separator"
                                   style="background-color: #128C7E; color: white; font-weight: bold; padding: 8px; border-radius: 5px; text-align: center; font-size: 16px;"/>
                        </group>
                    </group>
                    <separator/>
                    <separator string="üßÆ LIQUIDACI√ìN VACACIONES - TRUNCOS" style="color: #875A7B; font-weight: bold; font-size: 16px;"/>
                    <group>
                        <group> 
                            <separator string="‚è±Ô∏è Descripci√≥n"/>
                            <field name="x_cens_vaca_peri" string="Detalle del Periodo  " nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_vaca_dano" string="Detalle c√°lculo x a√±o" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_vaca_dmes" string="Detalle c√°lculo x mes" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_vaca_ddia" string="Detalle c√°lculo x d√≠a" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_vaca_dafp" string="Descuento AFP/ONP" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; color: red; font-weight: bold; text-align: left; font-size: 14px; vertical-align: middle;"/>
                        </group>
                        <group>
                            <separator string="üí∞ Importes"/>
                            <field name="x_cens_moneda" 
                                   string="Moneda" 
                                   nolabel="1" 
                                   colspan="2" 
                                   readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px;"/>
                            <field name="x_cens_vaca_iano" 
                                   string="Importe c√°lculo x a√±o" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_vaca_imes" 
                                   string="Importe c√°lculo x mes" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_vaca_idia" 
                                   string="Importe c√°lculo x d√≠a" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_vaca_iafp" 
                                   string="Importe AFP/ONP" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; color: red; font-weight: bold; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_vaca_itot" 
                                   string="Importe total VACA" 
                                   nolabel="1" 
                                   colspan="2" 
                                   class="oe_subtotal_footer_separator"
                                   style="background-color: #128C7E; color: white; font-weight: bold; padding: 8px; border-radius: 5px; text-align: center; font-size: 16px;"/>
                        </group>
                    </group>
                    <separator/>
                    <separator string="üßÆ LIQUIDACI√ìN GRATIFICACIONES - TRUNCOS" style="color: #875A7B; font-weight: bold; font-size: 16px;"/>
                    <group>
                        <group string="‚è±Ô∏è Descripci√≥n">
                            <field name="x_cens_grat_peri" string="Detalle del Periodo  " nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_grat_dmes" string="Detalle c√°lculo x mes" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                            <field name="x_cens_grat_dbon" string="Bonificaci√≥n" nolabel="1" colspan="2" readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px; vertical-align: middle;"/>
                        </group>
                        <group string="üí∞ Importes">
                            <field name="x_cens_moneda" 
                                   string="Moneda" 
                                   nolabel="1" 
                                   colspan="2" 
                                   readonly="1"
                                   style="padding: 5px; text-align: left; font-size: 14px;"/>
                            <field name="x_cens_grat_imes" 
                                   string="Importe c√°lculo x mes" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_grat_ibon" 
                                   string="Importe c√°lculo x d√≠a" 
                                   nolabel="1" 
                                   colspan="2"
                                   style="padding: 5px; text-align: center; font-size: 14px;"/>
                            <field name="x_cens_grat_itot" 
                                   string="Importe total VACA" 
                                   nolabel="1" 
                                   colspan="2" 
                                   class="oe_subtotal_footer_separator"
                                   style="background-color: #128C7E; color: white; font-weight: bold; padding: 8px; border-radius: 5px; text-align: center; font-size: 16px;"/>
                        </group>
                    </group>
                    <separator/>
                    <!-- Secci√≥n de observaciones -->
                    <separator string="üìù RESUMEN LIQUIDACI√ìN DE BB.SS." style="color: #875A7B; font-weight: bold; font-size: 16px;"/>
                    <group>
                        <group string="üìù BENEFICIOS TRUNCOS">
                            <field name="x_cens_ccts_itot" string="CTS Trunco" style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <field name="x_cens_vaca_itot" string="Vacaciones Truncas (*)" style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <div>
                            </div>
                            <div>
                                   <p style="margin: 1px 0 0 0; font-size: 10px;">* Incluye c√°lculo y descuento de importe ONP/AFP.</p>
                            </div>
                            <field name="x_cens_grat_itot" string="Gratificaciones Truncas" style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <field name="x_cens_liqu_tota" string="TOTAL A PAGAR" readonly="0" 
                                   widget="monetary"
                                   style="font-size: 16px; font-weight: bold; text-align: right; padding: 12px 150px 12px 12px; background-color: #a8e6cf; color: #2d5016; border: 2px solid #7bb8a6; border-radius: 6px;"/>
                            <separator/>
                        </group>
                        <group string="üìù APORTES">
                            <field name="x_studio_compania_afp" string="Compa√±ia AFP/ONP" style="font-size: 14px;"/>
                            <field name="x_cens_afp_oblig" string="Aporte Obligatorio" style="font-size: 14px;"/>
                            <field name="x_cens_afp_prima" string="Prima Seguro" style="font-size: 14px;"/>
                            <field name="x_studio_en_tipo_comision" string="Tipo Comisi√≥n" style="font-size: 14px;"/>
                            <field name="x_cens_afp_mixta" string="Comisi√≥n Mixta" 
                                   attrs="{'invisible': [('x_studio_en_tipo_comision', '!=', 'MIX')]}"
                                   style="font-size: 14px;"/>
                            <field name="x_cens_afp_flujo" string="Comisi√≥n Flujo"
                                   attrs="{'invisible': [('x_studio_en_tipo_comision', '!=', 'FLU')]}" 
                                   style="font-size: 14px;"/>
                            <separator/>
                        </group>
                    </group>
                    <group>
                        <group string="üìù √öLTIMA REMUNERACI√ìN">
                            <field name="x_studio_literal_fecha_titulo" string="Periodo" readonly="1" style="font-size: 14px;"/>
                            <field name="number" string="Boleta de Pago" readonly="1" style="font-size: 14px;"/>
                            <field name="x_studio_en_basico" string="B√°sico" widget="monetary" readonly="1" style="color:rgb(122, 126, 126); font-size: 14px;"/>
                            <field name="x_studio_en_asignacion_familiar" string="Asig.Familiar" widget="monetary" readonly="1" style="color:rgb(122, 126, 126); font-size: 14px;"/>
                            <field name="x_studio_en_bonificacion_cumplimiento" string="Bonificaci√≥n" widget="monetary" readonly="1" style="color:rgb(122, 126, 126); font-size: 14px;"/>
                            <field name="x_studio_en_feriados" string="Feriados" widget="monetary" readonly="1" style="color:rgb(122, 126, 126); font-size: 14px;"/>
                        </group>
                        <group string="üìù APORTE DEL EMPLEADOR">
                            <field name="x_cens_apor_mbas" string="Monto Base" style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                            <field name="x_cens_apor_essa" string="Aporte ESSALUD 9%" style="font-size: 14px; text-align: right; padding-right: 150px;"/>
                        
                        </group>
                    </group>
                    <separator/>
                    <!-- Secci√≥n de observaciones -->
                    <separator string="üìù OBSERVACIONES DE LIQUIDACI√ìN" style="color: #875A7B; font-weight: bold; font-size: 16px;"/>
                    <group>
                        <field name="note" 
                               string="Observaciones"
                               placeholder="Ingrese observaciones adicionales sobre la liquidaci√≥n..."
                               nolabel="1"
                               colspan="2"/>
                    </group>
                    
                    <group name="group_foot">
                        <group name="group_foot_left">
                        </group>
                        <group name="group_foot_right">
                            <div>
                            </div>
                            <div style="display: flex; gap: 8px; margin: 15px 0; width: 100%;">
    
                                <!-- Bot√≥n Verde claro (Generar) -->
                                <button name="action_recalcula_hoja_bbss"  
                                        string=" Generar" 
                                        type="object"
                                        class="btn-success oe_button"
                                        icon="fa-cog"
                                        style="flex: 1; max-width: 120px; background-color: #198754; border: 1px solid #198754; color: white; padding: 10px 8px; border-radius: 5px; font-weight: 500;"
                                        confirm="¬øSeguro de GENERAR Hoja de Liquidaci√≥n?"/>
                                
                                <!-- Bot√≥n Naranja (Imprimir) -->
                                <button name="action_liquidacion_imprimir_v2" 
                                        string=" Imprimir" 
                                        type="object" 
                                        class="btn-warning oe_button"
                                        icon="fa-print"
                                        style="flex: 1; max-width: 120px; background-color: #6f42c1; border: 1px solid #6f42c1; color: white; padding: 10px 8px; border-radius: 5px; font-weight: 500;"
                                        confirm="¬øSeguro de IMPRIMIR Hoja de liquidaci√≥n?"/>
                                
                                <!-- Bot√≥n Verde Oscuro (Limpiar) -->
                                <button name="action_liquidacion_blanquea" 
                                        string=" Limpiar" 
                                        type="object" 
                                        class="btn-primary oe_button"
                                        icon="fa-eraser"
                                        style="flex: 1; max-width: 120px; background-color: #ffc107; border: 1px solid #ffc107; color: #212529; padding: 10px 8px; border-radius: 5px; font-weight: 500;"
                                        confirm="¬øSeguro de BLANQUEAR Hoja de liquidaci√≥n?"/>

                                <!-- Bot√≥n Azul (Resumen) -->
                                <button name="action_recalcula_bbss" 
                                        string=" Resumen" 
                                        type="object" 
                                        class="btn-info oe_button"
                                        icon="fa-file-text"
                                        style="flex: 1; max-width: 120px; background-color: #3477dcff; border: 1px solid #3477dcff; color: #212529; padding: 10px 8px; border-radius: 5px; font-weight: 500;"
                                        confirm="¬øSeguro de BLANQUEAR Hoja de liquidaci√≥n?"/>
                                
                            </div>

                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_hr_payslip_tree_inherit_bbss" model="ir.ui.view">
        <field name="name">hr.payslip.tree.inherit.bbss</field>
        <field name="model">hr.payslip</field>
        <field name="inherit_id" ref="hr_payroll.view_hr_payslip_tree"/>
        <field name="priority">40</field> 
        <field name="arch" type="xml">
            <!-- ============================== -->
            <!--  GENERA REPORTE CALCULO CTS    -->
            <!-- ============================== -->
            <xpath expr="//header" position="inside">
                <button name="action_listado_cts_intermit" 
                        string="CTS Intermitentes" 
                        type="object" 
                        class="btn-warning oe_button"
                        icon="fa-file-excel-o"
                        confirm="¬øSeguro de IMPRIMIR listado de CTS Intermitentes?"/>
            </xpath>
        </field>
    </record>
</odoo>


<!--


                <button name="action_listado_cts_intermit"
                        string="CTS Intermitentes"
                        type="object" 
                        icon="fa-list"
                        class="oe_highlight oe_button"/>

                    <div style="display: flex; gap: 5px; margin-bottom: 5px; width: 100%;" name="studio_div_67e01d">
                                <button 
                                    name="action_liquidacion_compone"  
                                    string=" Generar Liquidaci√≥n" 
                                    type="object"
                                    class="oe_highlight oe_stat_button" 
                                    icon="fa-cog"
                                    style="color: #25D366;" 
                                    confirm="¬øSeguro de GENERAR Hoja de Liquidaci√≥n?"/>
                                <button 
                                    name="action_liquidacion_blanquea" 
                                    string=" Limpia datos" 
                                    type="object" 
                                    class="btn-danger oe_button" 
                                    icon="fa-calculator"
                                    style="flex: 1; max-width: 120px;" 
                                    confirm="¬øSeguro de BLANQUEAR Hoja de liquidaci√≥n?"/>
                                <button 
                                    name="action_liquidacion_imprimir" 
                                    string=" Imprimir Formato" 
                                    type="object" 
                                    class="btn-danger oe_button" 
                                    icon="fa-print"
                                    style="flex: 1; max-width: 120px;" 
                                    confirm="¬øSeguro de IMPRIMIR Hoja de liquidaci√≥n?"/>    
                            </div>



                                    icon="fa-wrench" 
                                    class="oe_highlight oe_button" 
                                    style="flex: 1; max-width: 120px;"



    <record id="view_hr_payslip_form_bbss_inherit" model="ir.ui.view">
        <field name="name">hr.payslip.form.bbss.inherit</field>
        <field name="model">hr.payslip</field>
        <field name="inherit_id" ref="hr_payroll.view_hr_payslip_form"/>
        <field name="priority">95</field>
        <field name="arch" type="xml">
            <field name="x_studio_cesado" invisible="1"/>
    
        </field>
    </record>
         
 
-->